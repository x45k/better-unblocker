/*hammerhead|script|start*/"use strict";if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_search_custom-scopes-element_ts"],{28406:(e,t,s)=>{s.r(t),s.d(t,{CustomScopesElement:()=>CustomScopesElement});var a=s(39595),o=s(26196);function i(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(e,t,s){if(!t.has(e))throw TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function l(e,t){var s=n(e,t,"get");return s.get?s.get.call(e):s.value}function r(e,t,s){i(e,t),t.set(e,s)}function c(e,t,s){var a=n(e,t,"set");if(a.set)a.set.call(e,s);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=s}return s}function u(e,t,s){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return s}function p(e,t){i(e,t),t.add(e)}function h(e,t,s,a){var o,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(o= __get$(e,l) )&&(n=(i<3?o(n):i>3?o(t,s,n):o(t,s))||n);return i>3&&n&&Object.defineProperty(t,s,n),n}var d=new WeakMap,m=new WeakMap,g=new WeakMap,f=new WeakMap,v=new WeakMap,b=new WeakSet,S=new WeakSet,y=new WeakSet;let CustomScopesElement=class CustomScopesElement extends HTMLElement{connectedCallback(){c(this,d,parseInt(this.getAttribute("data-max-custom-scopes")||"10",10))}initialize(e,t,s,a){c(this,m,e),c(this,g,t),c(this,f,s),c(this,v,a)}mode(){return this.createCustomScopeForm.hidden?"manage":"create"}customScopesSubmit(e){"manage"===this.mode()?this.create(""):this.saveCustomScope(e)}customScopesCancel(){"manage"!==this.mode()&&this.hasScopes?this.setMode("manage"):this.customScopesModalDialog.close()}setMode(e){this.hasScopes&&"manage"===e?(this.createCustomScopeForm.hidden=!0,this.manageCustomScopesForm.hidden=!1,u(this,b,w).call(this,"Saved searches","Create saved search")):(this.createCustomScopeForm.hidden=!1,this.manageCustomScopesForm.hidden=!0)}async saveCustomScope(e){e.preventDefault();let t=e.target.form;if(!t.checkValidity())return void t.reportValidity();if((await fetch(t.action,{method:"POST",body:new FormData(t)})).ok){l(this,m)?.clear();let e=await l(this,g).call(this);this.setScopes(e),t.reset(),this.setMode("manage")}}async show(){let e=await l(this,g).call(this);this.setScopes(e),this.customScopesModalDialog instanceof HTMLDialogElement?this.customScopesModalDialog.showModal():this.customScopesModalDialog.show(),this.setMode("manage")}openCustomScopesDialog(e){this.customScopesModalDialog instanceof HTMLDialogElement?this.customScopesModalDialog.showModal():this.customScopesModalDialog.show(),e.stopPropagation()}async editCustomScope(e){e.stopPropagation(),e.preventDefault();let t=e.target.getAttribute("data-id");t||(t=e.target.closest("button")?.getAttribute("data-id")||null);let s=await u(this,y,T).call(this,t);t&&s&&(u(this,b,w).call(this,"Update saved search","Update saved search"),this.customScopesIdField.value=s.id,this.customScopesNameField.value=s.name,this.customScopesQueryField.value=s.query,u(this,S,C).call(this,!1),this.setMode("create"))}create(e){u(this,b,w).call(this,"Create saved search","Create saved search"),this.customScopesIdField.value="",this.customScopesNameField.value="",this.customScopesQueryField.value=e,this.customScopesModalDialog instanceof HTMLDialogElement?this.customScopesModalDialog.showModal():this.customScopesModalDialog.show(),u(this,S,C).call(this,!0),this.setMode("create")}async deleteCustomScope(e){let t=l(this,f),s=e.target.getAttribute("data-id");if(s||(s=e.target.closest("button")?.getAttribute("data-id")||null),!t||!s)return;let a=new FormData;if(a.append("id",s),a.append("_method","delete"),(await fetch(t,{method:"POST",headers:{"Scoped-CSRF-Token":l(this,v)},body:a})).ok){let e=await l(this,g).call(this);this.setScopes(e)}l(this,m)?.clear(),this.setMode("manage")}setScopes(e){this.hasScopes=e.length>0;let t=e.map(e=>(0,o.qy)`
        <div class="d-flex py-1">
          <div>
            <div class="text-bold">${e.name}</div>
            <div class="text-small color-fg-muted">${e.query}</div>
          </div>
          <div class="flex-1"></div>
          <button
            type="button"
            class="btn btn-octicon"
            data-action="click:qbsearch-input#editCustomScope"
            data-id="${e.id}"
            aria-label="Edit saved search"
          >
            ${(function(){let e=document.getElementById("pencil-icon");return(0,o.qy)([e?.innerHTML])})()}
          </button>
          <button
            type="button"
            class="btn btn-octicon btn-danger"
            data-action="click:custom-scopes#deleteCustomScope"
            data-id="${e.id}"
            aria-label="Delete saved search"
          >
            ${(function(){let e=document.getElementById("trash-icon");return(0,o.qy)([e?.innerHTML])})()}
          </button>
        </div>
      `);(0,o.XX)((0,o.qy)`${t}`,this.list)}constructor(...e){super(...e),p(this,b),p(this,S),p(this,y),r(this,d,{writable:!0,value:void 0}),r(this,m,{writable:!0,value:void 0}),r(this,g,{writable:!0,value:()=>Promise.resolve([])}),r(this,f,{writable:!0,value:void 0}),r(this,v,{writable:!0,value:void 0}),function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}): __set$(e,t,s) }(this,"hasScopes",!1)}};function w(e,t){this.customScopesSubmitButton.textContent=t,this.customScopesModalDialog.getElementsByTagName("h1")[0].textContent=e}function C(e){let t=e&&(l(this,m)?.len()||0)>=l(this,d);t?this.customScopesModalDialogFlash.innerHTML=`
        <div class="flash flash-warn mb-3">
          Limit of 10 saved searches reached. Please delete an existing saved search before creating a new one.
        </div>
      `:this.customScopesModalDialogFlash.textContent="",this.customScopesSubmitButton.disabled=t}async function T(e){let t=l(this,m)?.get();return void 0===t&&(t=await l(this,g).call(this)),t.find(t=>t.id.toString()===e)}h([a.aC],CustomScopesElement.prototype,"list",void 0),h([a.aC],CustomScopesElement.prototype,"createCustomScopeForm",void 0),h([a.aC],CustomScopesElement.prototype,"manageCustomScopesForm",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesModalDialog",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesModalDialogFlash",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesIdField",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesNameField",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesQueryField",void 0),h([a.aC],CustomScopesElement.prototype,"customScopesSubmitButton",void 0),CustomScopesElement=h([a.p_],CustomScopesElement)},26196:(e,t,s)=>{s.d(t,{XX:()=>a.XX,_3:()=>a._3,qy:()=>a.qy});var a=s(31143)},31143:(e,t,s)=>{s.d(t,{qy:()=>T,XX:()=>v,_3:()=>E});let a=new Map;function o(e){if(a.has(e))return a.get(e);let t=e.length,s=0,o=0,i=0,n=[];for(let a=0;a<t;a+=1){let t= __get$(e,a) ,l= __get$(e,a+1) ,r= __get$(e,a-1) ;"{"===t&&"{"===l&&"\\"!==r?(1===(i+=1)&&(o=a),a+=1):"}"===t&&"}"===l&&"\\"!==r&&i&&0==(i-=1)&&(o>s&&(n.push(Object.freeze({type:"string",start:s,end:o,value:e.slice(s,o)})),s=o),n.push(Object.freeze({type:"part",start:o,end:a+2,value:e.slice(s+2,a).trim()})),a+=1,s=a+1)}return s<t&&n.push(Object.freeze({type:"string",start:s,end:t,value:e.slice(s,t)})),a.set(e,Object.freeze(n)),a.get(e)}let i=new WeakMap,n=new WeakMap;let AttributeTemplatePart=class AttributeTemplatePart{constructor(e,t){this.expression=t,i.set(this,e),e.updateParent("")}get attributeName(){return i.get(this).attr.name}get attributeNamespace(){return i.get(this).attr.namespaceURI}get value(){return n.get(this)}set value(e){n.set(this,e||""),i.get(this).updateParent(e)}get element(){return i.get(this).element}get booleanValue(){return i.get(this).booleanValue}set booleanValue(e){i.get(this).booleanValue=e}};let AttributeValueSetter=class AttributeValueSetter{constructor(e,t){this.element=e,this.attr=t,this.partList=[]}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(e){if(1!==this.partList.length)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=e?"":null}append(e){this.partList.push(e)}updateParent(e){if(1===this.partList.length&&null===e)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{let e=this.partList.map(e=>"string"==typeof e?e:e.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,e)}}};let l=new WeakMap;let NodeTemplatePart=class NodeTemplatePart{constructor(e,t){this.expression=t,l.set(this,[e]),e.textContent=""}get value(){return l.get(this).map(e=>e.textContent).join("")}set value(e){ __call$(this,"replace",[e]) }get previousSibling(){return l.get(this)[0].previousSibling}get nextSibling(){return  __get$(l.get(this),l.get(this).length-1) .nextSibling}replace(...e){let t=e.map(e=>"string"==typeof e?new Text(e):e);for(let e of(t.length||t.push(new Text("")),l.get(this)[0].before(...t),l.get(this)))e.remove();l.set(this,t)}};function r(e){return{processCallback(t,s,a){var o;if("object"==typeof a&&a){for(let t of s)if(t.expression in a){let s=null!=(o= __get$(a,t.expression) )?o:"";e(t,s)}}}}}function c(e,t){e.value=String(t)}function u(e,t){return"boolean"==typeof t&&e instanceof AttributeTemplatePart&&"boolean"==typeof  __get$(e.element,e.attributeName) &&(e.booleanValue=t,!0)}let p=r(c);r((e,t)=>{u(e,t)||c(e,t)});let h=new WeakMap,d=new WeakMap;let TemplateInstance=class TemplateInstance extends DocumentFragment{constructor(e,t,s=p){var a,i;super(),Object.getPrototypeOf(this)!==TemplateInstance.prototype&&Object.setPrototypeOf(this,TemplateInstance.prototype),this.appendChild(e.content.cloneNode(!0)),d.set(this,Array.from(function*(e){let t,s=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);for(;t=s.nextNode();)if(t instanceof Element&&t.hasAttributes())for(let e=0;e<t.attributes.length;e+=1){let s=t.attributes.item(e);if(s&&s.value.includes("{{")){let e=new AttributeValueSetter(t,s);for(let t of o(s.value))if("string"===t.type)e.append(t.value);else{let s=new AttributeTemplatePart(e,t.value);e.append(s),yield s}}}else if(t instanceof Text&&t.textContent&&t.textContent.includes("{{")){let e=o(t.textContent);for(let s=0;s<e.length;s+=1){let a= __get$(e,s) ;a.end<t.textContent.length&&t.splitText(a.end),"part"===a.type&&(yield new NodeTemplatePart(t,a.value));break}}}(this))),h.set(this,s),null==(i=(a=h.get(this)).createCallback)||i.call(a,this,d.get(this),t),h.get(this).processCallback(this,d.get(this),t)}update(e){h.get(this).processCallback(this,d.get(this),e)}};let m=new WeakMap,g=new WeakMap,f=new WeakMap;let TemplateResult=class TemplateResult{constructor(e,t,s){this.strings=e,this.values=t,this.processor=s}static setCSPTrustedTypesPolicy(e){TemplateResult.cspTrustedTypesPolicy=e}get template(){var e,t;if(m.has(this.strings))return m.get(this.strings);{let s=document.createElement("template"),a=this.strings.length-1,o=this.strings.reduce((e,t,s)=>e+t+(s<a?`{{ ${s} }}`:""),"");return s.innerHTML=null!=(t=null==(e=TemplateResult.cspTrustedTypesPolicy)?void 0:e.createHTML(o))?t:o,m.set(this.strings,s),s}}renderInto(e){let t=this.template;if(g.get(e)!==t){g.set(e,t);let s=new TemplateInstance(t,this.values,this.processor);f.set(e,s),e instanceof NodeTemplatePart? __call$(e,"replace",[...s.children]) :e.appendChild(s);return}f.get(e).update(this.values)}};function v(e,t){e.renderInto(t)}TemplateResult.cspTrustedTypesPolicy=null;let b=new WeakSet;function S(e){return(...t)=>{let s=e(...t);return b.add(s),s}}let y=new WeakMap;let EventHandler=class EventHandler{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this),y.get(this.element).set(this.type,this)}set(e){"function"==typeof e?this.handleEvent=e.bind(this.element):"object"==typeof e&&"function"==typeof e.handleEvent?this.handleEvent=e.handleEvent.bind(e):(this.element.removeEventListener(this.type,this),y.get(this.element).delete(this.type))}static for(e){y.has(e.element)||y.set(e.element,new Map);let t=e.attributeName.slice(2),s=y.get(e.element);return s.has(t)?s.get(t):new EventHandler(e.element,t)}};function w(e,t){b.has(t)&&(t(e),1)||u(e,t)||e instanceof AttributeTemplatePart&&e.attributeName.startsWith("on")&&(EventHandler.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),1)||t instanceof TemplateResult&&e instanceof NodeTemplatePart&&(t.renderInto(e),1)||t instanceof DocumentFragment&&e instanceof NodeTemplatePart&&(t.childNodes.length&& __call$(e,"replace",[...t.childNodes]) ,1)||function(e,t){if(!("object"==typeof t&&Symbol.iterator in t))return!1;if(!(e instanceof NodeTemplatePart))return e.value=Array.from(t).join(" "),!0;{let s=[];for(let e of t)if(e instanceof TemplateResult){let t=document.createDocumentFragment();e.renderInto(t),s.push(...t.childNodes)}else e instanceof DocumentFragment?s.push(...e.childNodes):s.push(String(e));return s.length&& __call$(e,"replace",[...s]) ,!0}}(e,t)||c(e,t)}let C=r(w);function T(e,...t){return new TemplateResult(e,t,C)}let M=new WeakMap;S((...e)=>t=>{M.has(t)||M.set(t,{i:e.length});let s=M.get(t);for(let a=0;a<e.length;a+=1) __get$(e,a) instanceof Promise?Promise.resolve( __get$(e,a) ).then(e=>{a<s.i&&(s.i=a,w(t,e))}):a<=s.i&&(s.i=a,w(t, __get$(e,a) ))});let E=S(e=>t=>{var s,a;if(!(t instanceof NodeTemplatePart))return;let o=document.createElement("template");o.innerHTML=null!=(a=null==(s=TemplateResult.cspTrustedTypesPolicy)?void 0:s.createHTML(e))?a:e;let i=document.importNode(o.content,!0); __call$(t,"replace",[...i.childNodes]) })}}]);

/*hammerhead|script|end*/