/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
F.addLog("superman:components/hotsearch",["hotsearchClick","hotsearchShow","hotsearchSet","newsClick","newsShow"]);F.addLog("superman:components",{categoryClick:"1200100001"});F.module("superman:components/hotsearch",function(require,exports,ctx){var pageNum=0;var hotsearchData;var totalPages;var $hotsearchWrapper=$(".s-hotsearch-wrapper");var $hotsearchContentWrapper=$hotsearchWrapper.find("#hotsearch-content-wrapper");var $hideHotsearchBtn=$("#s-user-setting-menu .s-set-hotsearch.set-hide")
;var $showHotsearchBtn=$("#s-user-setting-menu .s-set-hotsearch.set-show");var $hotBoardWrapper=$(".s-hotboard-wrapper");var nodeSample=bds&&bds.comm&&bds.comm.nodeSample||"";var hotTip=nodeSample;var aiSampleval=bds&&bds.comm&&bds.comm.aiSampleval;var hitHotBoardSample=bds&&bds.comm&&bds.comm.hitHotBoardSample;var hitRecommendStyleSample=bds&&bds.comm&&bds.comm.hitRecommendStyleSample;function parseHotsearchData(){if(!hotsearchData||hotsearchData.length<1){return}var hitHotTip=hotTip.indexOf(
"change_item")>-1||hotTip.indexOf("change_all")>-1;var hitSample=nodeSample.indexOf("notlogin_hotitem_6")>-1||/(61006|61008)/.test(window.s_session.sid);var perPage=hitSample?6:hitHotTip?16:10;totalPages=Math.floor(hotsearchData.length/perPage);tempData=hotsearchData.map(function(item){var newItem=item;newItem.index=parseInt(item.index,10);if(newItem.index===-100){newItem.isAd=true}else if(newItem.index===0){newItem.isTop=true}return newItem});var current=0;hotsearchData=[];while(
current<totalPages){hotsearchData.push(tempData.slice(current*perPage,current*perPage+perPage));current++}}function changeStatus(nodeA,nodeB){nodeA.css("display","none");nodeB.css("display","inline-block")}function updateHotsearchItem(data,itemIndex){var currentIndex=data.index;var $curDom=$hotsearchContentWrapper.find('[data-index="'+itemIndex+'"]');var $titleContent=$curDom.find(".title-content");var newDom=$curDom.html();$curDom.empty();$curDom.append(newDom)
;$curDom=$hotsearchContentWrapper.find('[data-index="'+itemIndex+'"]');$titleContent=$curDom.find(".title-content");var $titleIndex=$titleContent.find(".title-content-index");var $lastIndexClass=$titleIndex.attr("class")||"";var $titleMark=$curDom.find(".title-content-mark");var text=data.card_title;var tag=data.pre_tag;var link=decodeURIComponent(data.linkurl);$titleContent.attr("href",link);$titleContent.removeClass("tag-width");var title=$titleContent.find(".title-content-title");title.text(
text);title.find(".title-content-icon").remove();if(tag){var preImg='<img class="title-content-icon" src="'+tag+'" />';title.prepend(preImg)}if(itemIndex===0){var $topWord=$curDom.find(".title-content-top-icon");data.isTop?changeStatus($titleIndex,$topWord):changeStatus($topWord,$titleIndex)}else if(itemIndex===5||itemIndex===4){var $adWord=$curDom.find(".title-content-noindex");data.isAd?changeStatus($titleIndex,$adWord):changeStatus($adWord,$titleIndex)}$titleIndex.removeClass()
;var newClass= __call$($lastIndexClass,"replace",[/c-index-single-hot[^ ]+/,"c-index-single-hot"+currentIndex]) ;$titleIndex.addClass(newClass);$titleIndex.text(currentIndex);var markClass=$titleMark.attr("class")||"c-text";$titleMark.removeClass();var HOT_TAGS=["","c-text-new","c-text-business","c-text-hot","c-text-fei","c-text-bao","c-text-rec"];var HOT_TAGS_TEXT=["","新","商","热","沸","爆","荐"];var className= __get$(HOT_TAGS,data.hotTags) ||"";$titleMark.addClass( __call$(markClass,"replace",[/c-text-[^ ]+/,""]) +" "+className)
;$titleMark.text( __get$(HOT_TAGS_TEXT,data.hotTags) );if(className){$titleContent.addClass("tag-width")}}function hotsearchRefreshHandler(){if(!hotsearchData||hotsearchData.length<1){return}pageNum++;if(pageNum>=totalPages){pageNum=0}if( __get$(hotsearchData,pageNum) ){ __get$(hotsearchData,pageNum) .forEach(updateHotsearchItem)}sendHotsearchShowLog()}function bindHotSearchClickEvent(){$(".hot-title").click(function(){ctx.fire("hotsearchClick",{clickType:"hotSearchTitle"});sendUbcClickLog("title")})}
function bindRefreshClickEvent(){$("#hotsearch-refresh-btn").click(function(){ctx.fire("newsClick",{clickType:"wordsChange"});hotsearchRefreshHandler();$(".c-icon").addClass("rotate");setTimeout(function(){$(".c-icon").removeClass("rotate")},200);sendUbcClickLog("change");bindHotsearchItemClickEvent()})}function bindMoreBtnClickEvent(){$(".s-hotsearch-button").click(function(){ctx.fire("newsClick",{clickType:"moreBtnClick"})})}function sendHotsearchShowLog(){var wordsStr=[]
;$hotsearchContentWrapper.find(".title-content-title").map(function(index,dom){wordsStr.push(dom.innerText)});ctx.fire("hotsearchShow",{showType:"hotword",words:$.stringify(wordsStr),pagenum:pageNum})}function bindHotsearchItemClickEvent(){$hotsearchContentWrapper.find(".title-content").off("click").click(function(){var title=$(this).find(".title-content-title").text();ctx.fire("newsClick",{clickType:"wordTopic",newsType:"words",url:$(this).attr("href"),title:title,pagenum:pageNum,newsindex:$(
this).closest(".hotsearch-item").attr("data-index")});sendUbcClickLog("item",{list:[{order:$(this).find(".title-content-index").text(),title:title}]})})}function moreBtnShow(){var hitHotTip=hotTip.indexOf("change_button")>-1||hotTip.indexOf("change_all")>-1;if(hitHotTip){ctx.fire("newsShow",{showType:"moreBtnShow"})}}function judgeHotsearchStatus(){var isLogin=s_session.isLogin;var isHideHotsearch=$.cookie.get("hide_hotsearch");if(!isLogin){if(isHideHotsearch!=="1"){showHotsearch()}else{
hideHotsearch()}}}function showHotsearch(){$hotsearchWrapper.removeClass("hide");$hideHotsearchBtn.show();$showHotsearchBtn.hide();$("#head_wrapper").removeClass("s-ps-islite");if(aiSampleval){$("#s_wrap").css("display","")}if(hitHotBoardSample||hitRecommendStyleSample){$hotBoardWrapper.removeClass("hide")}}function hideHotsearch(){$hotsearchWrapper.addClass("hide");$hideHotsearchBtn.hide();$showHotsearchBtn.show();$("#head_wrapper").addClass("s-ps-islite");if(aiSampleval){$("#s_wrap").hide()}
if(hitHotBoardSample||hitRecommendStyleSample){$hotBoardWrapper.addClass("hide")}}function bindShowAndHideHotsearchBtnClickEvent(){$showHotsearchBtn.click(function(){showHotsearch();$.cookie.remove("hide_hotsearch");ctx.fire("categoryClick",{category:"tjshowhotsearch"});sendUbcClickLog("open_hotsearch",{area:""})});$hideHotsearchBtn.click(function(){hideHotsearch();var expiresDate=new Date;expiresDate.setTime(expiresDate.getTime()+365*24*60*60*1e3);$.cookie.set("hide_hotsearch",1,{path:"/",
expires:expiresDate});ctx.fire("categoryClick",{category:"tjhidehotsearch"});sendUbcClickLog("close_hotsearch",{area:""})})}function getHotsearchData(){try{var hotSearchDataJSon=JSON.parse($("#hotsearch_data").text());hotsearchData=hotSearchDataJSon&&hotSearchDataJSon.hotsearch;parseHotsearchData()}catch(err){hotsearchData=[];$("#hotsearch-refresh-btn").hide()}}function sendUbcClickLog(value,ext){F.ubc&&F.ubc.sendClickLog(value, __call$(Object,"assign",[{},{is_log:window.s_session.isLogin?"1":"0",area:"realtime"},ext]) )}function addLoginClass(){var isLogin=s_session.isLogin;if(!isLogin){return}$hotsearchWrapper.addClass("s-hotsearch-wrapper-login")}function init(){bindHotSearchClickEvent();bindRefreshClickEvent();bindMoreBtnClickEvent();bindHotsearchItemClickEvent();bindShowAndHideHotsearchBtnClickEvent();sendHotsearchShowLog();judgeHotsearchStatus();moreBtnShow();getHotsearchData();addLoginClass()}exports.init=init});F.call("superman:components/hotsearch","init");
/*hammerhead|script|end*/